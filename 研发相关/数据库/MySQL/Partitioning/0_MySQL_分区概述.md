## 分区概述

### 分区的实现

Mysql 数据库中的数据是以文件的形式保存在磁盘上的，默认放在 `mysql/data` 路径，不同的引擎生成的文件后缀不同，像 `MyISAM` 生成 `.MYD` 和 `.MYI` 后缀文件， `MYI` 存放索引（非聚簇索引）。`Innodb` 生成 `.idb` 后缀文件（聚簇索引）。当 `mysql` 表中数据越来越多，文件会变的越来越大，这个时候查询数据的速度会变慢。

### 分区的好处

当表非常大，或者表中有大量的历史记录，而“热数据”却位于表的末尾。如日志系统、新闻。。。此时就可以考虑分区表（也可以使用分表，但是会增加业务的复杂性）。

假设一个商城订单系统，每年一个总表为 `order_year_2018` ,最近三个月有一个分表 `order_mouth_3` 。用户按年份选择订单就到年表中查询，按最近三个月选择订单就到最近三个月的分表中查询。此时，使用分区表比设计分表更合适。

- 存储更多的数据

  分区使在一个 `table` 中存储的数据比单个磁盘或文件系统分区中存储的数据更多。同时，如果表的数据太大，一个磁盘放不下的时候可以把数据分配到不同的磁盘里面去。

- 方便删除历史数据

  通过删除仅包含该数据的一个或多个分区，可以轻松地从分区 `table` 中删除失去其用途的数据。相反，在某些情况下，通过添加一个或多个用于专门存储该数据的新分区，可以大大简化添加新数据的过程。

  如果是启用一个或多个带 `where` 条件的 `delete` 语句去删除（一般 `where` 条件是时间）。 这对数据库的造成了很大压力。即使我们把这些删除了，但底层的数据文件并没有变小。

- 提高查询效率

  可以把一些归类的数据放在一个分区中，可以减少服务器检查数据的数量加快查询。
  这主要是借助于满足一个给定 `WHERE` 语句的数据可以只保存在一个或多个分区内，这样在查找时就不用查找其他剩余的分区。

另外， `MySQL` 支持显式的分区选择查询。例如，`SELECT * FROM t PARTITION (p0, p1) WHERE c < 5` 仅选择分区 `p0` 和 `p1` 中与 `WHERE` 条件匹配的那些行。在这种情况下，`MySQL` 不会检查 `table t` 的任何其他分区；当您已经知道要检查的分区时，这可以大大加快查询速度。数据修改语句 `DELETE` ， `INSERT` ， `REPLACE` ， `UPDATE` 和 `LOADDATA` ， `LOADXML` 也支持分区选择。
